  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "street_1" varchar, "street_2" varchar, "city" varchar, "state" varchar, "zip" varchar, "short_name" varchar, "active" boolean DEFAULT 1, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "student_teams"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "student_teams" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "student_id" integer, "team_id" integer, "start_date" date, "end_date" date, "position" integer, "active" boolean DEFAULT 1)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_student_teams_on_student_id" ON "student_teams" ("student_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_student_teams_on_team_id" ON "student_teams" ("team_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "students"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "students" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "grade" integer, "organization_id" integer, "active" boolean DEFAULT 1)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_students_on_organization_id" ON "students" ("organization_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "teams"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "teams" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "organization_id" integer, "division" varchar, "active" boolean DEFAULT 1)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_teams_on_organization_id" ON "teams" ("organization_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210108201029)[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210108191605),
(20210108200846),
(20210108200938);

[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2021-03-17 08:40:27.148439"], ["updated_at", "2021-03-17 08:40:27.148439"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should not allow for an end date in the future or before the start date. 
---------------------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:27.663563"], ["updated_at", "2021-03-17 08:40:27.663563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:27.670347"], ["updated_at", "2021-03-17 08:40:27.670347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:27.674831"], ["updated_at", "2021-03-17 08:40:27.674831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:27.680318"], ["updated_at", "2021-03-17 08:40:27.680318"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:27.688169"], ["updated_at", "2021-03-17 08:40:27.688169"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:27.693699"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.5ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.4ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams positionally. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.101638"], ["updated_at", "2021-03-17 08:40:31.101638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.104946"], ["updated_at", "2021-03-17 08:40:31.104946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.108320"], ["updated_at", "2021-03-17 08:40:31.108320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.112450"], ["updated_at", "2021-03-17 08:40:31.112450"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.117337"], ["updated_at", "2021-03-17 08:40:31.117337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.124211"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" ORDER BY "student_teams"."position" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-active student as part of an invalid assignment. 
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.182602"], ["updated_at", "2021-03-17 08:40:31.182602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.187750"], ["updated_at", "2021-03-17 08:40:31.187750"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.191405"], ["updated_at", "2021-03-17 08:40:31.191405"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.194135"], ["updated_at", "2021-03-17 08:40:31.194135"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.197190"], ["updated_at", "2021-03-17 08:40:31.197190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.210131"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (1.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "ghost"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTeamTest: test_: Given context should list all captains. 
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.290272"], ["updated_at", "2021-03-17 08:40:31.290272"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.294294"], ["updated_at", "2021-03-17 08:40:31.294294"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.297925"], ["updated_at", "2021-03-17 08:40:31.297925"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.301872"], ["updated_at", "2021-03-17 08:40:31.301872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.307373"], ["updated_at", "2021-03-17 08:40:31.307373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.312126"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."position" = ?[0m  [["position", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams for a given student. 
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.413059"], ["updated_at", "2021-03-17 08:40:31.413059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.420848"], ["updated_at", "2021-03-17 08:40:31.420848"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.428086"], ["updated_at", "2021-03-17 08:40:31.428086"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.431174"], ["updated_at", "2021-03-17 08:40:31.431174"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.433546"], ["updated_at", "2021-03-17 08:40:31.433546"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.436299"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ?[0m  [["student_id", 2]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
StudentTeamTest: test_: StudentTeam should belong to team. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams alphabetically. 
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.491604"], ["updated_at", "2021-03-17 08:40:31.491604"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.495415"], ["updated_at", "2021-03-17 08:40:31.495415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.499349"], ["updated_at", "2021-03-17 08:40:31.499349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.504537"], ["updated_at", "2021-03-17 08:40:31.504537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.508415"], ["updated_at", "2021-03-17 08:40:31.508415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.511935"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" INNER JOIN "students" ON "students"."id" = "student_teams"."student_id" ORDER BY last_name, first_name[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require start_date to be set. 
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list all past student_team assignments. 
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.591076"], ["updated_at", "2021-03-17 08:40:31.591076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.594419"], ["updated_at", "2021-03-17 08:40:31.594419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.597102"], ["updated_at", "2021-03-17 08:40:31.597102"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.599799"], ["updated_at", "2021-03-17 08:40:31.599799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.603874"], ["updated_at", "2021-03-17 08:40:31.603874"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.606567"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.6ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.2ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.3ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-17"], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list all current student_team assignments. 
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.675381"], ["updated_at", "2021-03-17 08:40:31.675381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.679115"], ["updated_at", "2021-03-17 08:40:31.679115"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.682365"], ["updated_at", "2021-03-17 08:40:31.682365"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.686121"], ["updated_at", "2021-03-17 08:40:31.686121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.691098"], ["updated_at", "2021-03-17 08:40:31.691098"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.694101"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NULL)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require position to be set. 
-----------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-existent student as part of an invalid assignment. 
---------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.774734"], ["updated_at", "2021-03-17 08:40:31.774734"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.778211"], ["updated_at", "2021-03-17 08:40:31.778211"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.780750"], ["updated_at", "2021-03-17 08:40:31.780750"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.783232"], ["updated_at", "2021-03-17 08:40:31.783232"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.786294"], ["updated_at", "2021-03-17 08:40:31.786294"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.791559"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to Wed, 24 Mar 2021. 
-----------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to nil. 
--------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should belong to student. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list inactive student_teams. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.853272"], ["updated_at", "2021-03-17 08:40:31.853272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.856634"], ["updated_at", "2021-03-17 08:40:31.856634"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.860236"], ["updated_at", "2021-03-17 08:40:31.860236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.865028"], ["updated_at", "2021-03-17 08:40:31.865028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.869761"], ["updated_at", "2021-03-17 08:40:31.869761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.875072"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.4ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_teams" WHERE "student_teams"."active" != ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."active" != ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require team_id to be set. 
----------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should end the current team assignment if it exists before adding a new team assignment for a student. 
---------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:31.950433"], ["updated_at", "2021-03-17 08:40:31.950433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:31.954756"], ["updated_at", "2021-03-17 08:40:31.954756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:31.957663"], ["updated_at", "2021-03-17 08:40:31.957663"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:31.962519"], ["updated_at", "2021-03-17 08:40:31.962519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:31.967846"], ["updated_at", "2021-03-17 08:40:31.967846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:31.971429"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-02-24"], ["id", 2]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 3], ["start_date", "2021-02-24"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
StudentTeamTest: test_: Given context should have a make_active method. 
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.039467"], ["updated_at", "2021-03-17 08:40:32.039467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.043868"], ["updated_at", "2021-03-17 08:40:32.043868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.072064"], ["updated_at", "2021-03-17 08:40:32.072064"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.075826"], ["updated_at", "2021-03-17 08:40:32.075826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.079303"], ["updated_at", "2021-03-17 08:40:32.079303"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.081818"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.9ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "active" = ? WHERE "student_teams"."id" = ?[0m  [["active", 1], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should allow for an end date in the past (or today) but after the start date. 
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.139444"], ["updated_at", "2021-03-17 08:40:32.139444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.143065"], ["updated_at", "2021-03-17 08:40:32.143065"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.145933"], ["updated_at", "2021-03-17 08:40:32.145933"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.148766"], ["updated_at", "2021-03-17 08:40:32.148766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.152387"], ["updated_at", "2021-03-17 08:40:32.152387"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.155604"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list active student_teams. 
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.222875"], ["updated_at", "2021-03-17 08:40:32.222875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.226365"], ["updated_at", "2021-03-17 08:40:32.226365"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.229134"], ["updated_at", "2021-03-17 08:40:32.229134"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.231758"], ["updated_at", "2021-03-17 08:40:32.231758"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.234101"], ["updated_at", "2021-03-17 08:40:32.234101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.237127"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_teams" WHERE "student_teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to "bad". 
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to 2.5. 
--------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams for a given team. 
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.306343"], ["updated_at", "2021-03-17 08:40:32.306343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.311571"], ["updated_at", "2021-03-17 08:40:32.311571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.317705"], ["updated_at", "2021-03-17 08:40:32.317705"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.327447"], ["updated_at", "2021-03-17 08:40:32.327447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.331741"], ["updated_at", "2021-03-17 08:40:32.331741"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.336650"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.3ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.5ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.2ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (team_id =1)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should only allow integers for position which are greater than 0 and less than 6. 
----------------------------------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require student_id to be set. 
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Wed, 27 Jan 2021. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow position to be set to 2. 
--------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should not terminate a team assignment that is already closed. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.479649"], ["updated_at", "2021-03-17 08:40:32.479649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.484483"], ["updated_at", "2021-03-17 08:40:32.484483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.493189"], ["updated_at", "2021-03-17 08:40:32.493189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.496993"], ["updated_at", "2021-03-17 08:40:32.496993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.500976"], ["updated_at", "2021-03-17 08:40:32.500976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.505398"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-01-20"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to -4. 
-------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should terminate a team assignment as of today. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (2.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.564129"], ["updated_at", "2021-03-17 08:40:32.564129"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.569722"], ["updated_at", "2021-03-17 08:40:32.569722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.575785"], ["updated_at", "2021-03-17 08:40:32.575785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.579892"], ["updated_at", "2021-03-17 08:40:32.579892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.584569"], ["updated_at", "2021-03-17 08:40:32.584569"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.592600"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-17"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Wed, 17 Mar 2021. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to "bad". 
------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-active team as part of an invalid assignment. 
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.651541"], ["updated_at", "2021-03-17 08:40:32.651541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.655318"], ["updated_at", "2021-03-17 08:40:32.655318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.658303"], ["updated_at", "2021-03-17 08:40:32.658303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.661455"], ["updated_at", "2021-03-17 08:40:32.661455"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.665630"], ["updated_at", "2021-03-17 08:40:32.665630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.669507"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ghost"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to nil. 
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: Given context should have a make_inactive method. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.747421"], ["updated_at", "2021-03-17 08:40:32.747421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.753992"], ["updated_at", "2021-03-17 08:40:32.753992"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.761935"], ["updated_at", "2021-03-17 08:40:32.761935"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.765051"], ["updated_at", "2021-03-17 08:40:32.765051"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.768093"], ["updated_at", "2021-03-17 08:40:32.768093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.771049"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "active" = ? WHERE "student_teams"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams chronologically. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.828834"], ["updated_at", "2021-03-17 08:40:32.828834"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.831945"], ["updated_at", "2021-03-17 08:40:32.831945"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.834344"], ["updated_at", "2021-03-17 08:40:32.834344"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.836938"], ["updated_at", "2021-03-17 08:40:32.836938"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.839676"], ["updated_at", "2021-03-17 08:40:32.839676"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.842581"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.7ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" ORDER BY "student_teams"."start_date" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-existent team as part of an invalid assignment. 
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.897237"], ["updated_at", "2021-03-17 08:40:32.897237"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.900483"], ["updated_at", "2021-03-17 08:40:32.900483"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.903389"], ["updated_at", "2021-03-17 08:40:32.903389"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.906323"], ["updated_at", "2021-03-17 08:40:32.906323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.909386"], ["updated_at", "2021-03-17 08:40:32.909386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.913330"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Sun, 17 Mar 2019. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
StudentTest: test_: Student should require first_name to be set. 
-----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to -4. 
--------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list senior students. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:32.980987"], ["updated_at", "2021-03-17 08:40:32.980987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:32.986857"], ["updated_at", "2021-03-17 08:40:32.986857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:32.990546"], ["updated_at", "2021-03-17 08:40:32.990546"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:32.993278"], ["updated_at", "2021-03-17 08:40:32.993278"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:32.995906"], ["updated_at", "2021-03-17 08:40:32.995906"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:32.998729"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE (grade > 6)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE (grade > 6)[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should identify a non-active organization as part of an invalid student. 
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.027842"], ["updated_at", "2021-03-17 08:40:33.027842"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.033353"], ["updated_at", "2021-03-17 08:40:33.033353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.037703"], ["updated_at", "2021-03-17 08:40:33.037703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.041502"], ["updated_at", "2021-03-17 08:40:33.041502"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (24.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.043942"], ["updated_at", "2021-03-17 08:40:33.043942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.071661"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ghost"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ghost"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "ghost"], ["active", 0], ["created_at", "2021-03-17 08:40:33.093504"], ["updated_at", "2021-03-17 08:40:33.093504"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
StudentTest: test_: Given context should have a make_active method. 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.101471"], ["updated_at", "2021-03-17 08:40:33.101471"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.105444"], ["updated_at", "2021-03-17 08:40:33.105444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.108889"], ["updated_at", "2021-03-17 08:40:33.108889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.113582"], ["updated_at", "2021-03-17 08:40:33.113582"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.117903"], ["updated_at", "2021-03-17 08:40:33.117903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.3ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.123910"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "active" = ? WHERE "students"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTest: test_: Given context should shows name as last, first name. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.150038"], ["updated_at", "2021-03-17 08:40:33.150038"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.153615"], ["updated_at", "2021-03-17 08:40:33.153615"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.156698"], ["updated_at", "2021-03-17 08:40:33.156698"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.159485"], ["updated_at", "2021-03-17 08:40:33.159485"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.162180"], ["updated_at", "2021-03-17 08:40:33.162180"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.164768"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return nil for student's current team, if doesn't exist. 
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.185810"], ["updated_at", "2021-03-17 08:40:33.185810"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.194210"], ["updated_at", "2021-03-17 08:40:33.194210"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.198196"], ["updated_at", "2021-03-17 08:40:33.198196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.203025"], ["updated_at", "2021-03-17 08:40:33.203025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.206350"], ["updated_at", "2021-03-17 08:40:33.206350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.210049"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-16"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 3], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTest: test_: Student should have many teams through student_teams. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTest: test_: Student should allow grade to be set to 12. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
StudentTest: test_: Given context should distinguish between junior and senior students. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.276183"], ["updated_at", "2021-03-17 08:40:33.276183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.281282"], ["updated_at", "2021-03-17 08:40:33.281282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.291164"], ["updated_at", "2021-03-17 08:40:33.291164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.295615"], ["updated_at", "2021-03-17 08:40:33.295615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.298841"], ["updated_at", "2021-03-17 08:40:33.298841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.303328"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Student should require organization_id to be set. 
----------------------------------------------------------------------
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTest: test_: Student should require last_name to be set. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
StudentTest: test_: Student should belong to organization. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to 10.5. 
----------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
StudentTest: test_: Given context should list inactive students. 
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.340991"], ["updated_at", "2021-03-17 08:40:33.340991"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.345203"], ["updated_at", "2021-03-17 08:40:33.345203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.350082"], ["updated_at", "2021-03-17 08:40:33.350082"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.358424"], ["updated_at", "2021-03-17 08:40:33.358424"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.364415"], ["updated_at", "2021-03-17 08:40:33.364415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.4ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.369338"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE "students"."active" != ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return student's current team, given multiple teams. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.398104"], ["updated_at", "2021-03-17 08:40:33.398104"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.401531"], ["updated_at", "2021-03-17 08:40:33.401531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.432914"], ["updated_at", "2021-03-17 08:40:33.432914"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.435392"], ["updated_at", "2021-03-17 08:40:33.435392"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.437784"], ["updated_at", "2021-03-17 08:40:33.437784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.440530"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-16"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 3], ["start_date", "2021-03-16"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to nil. 
---------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
StudentTest: test_: Student should have many student_teams. 
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTest: test_: Given context should list students alphabetically. 
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.497367"], ["updated_at", "2021-03-17 08:40:33.497367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.501877"], ["updated_at", "2021-03-17 08:40:33.501877"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.504731"], ["updated_at", "2021-03-17 08:40:33.504731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.508654"], ["updated_at", "2021-03-17 08:40:33.508654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.511908"], ["updated_at", "2021-03-17 08:40:33.511908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.515453"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" ORDER BY last_name, first_name[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return student's current team, given it exists. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.543802"], ["updated_at", "2021-03-17 08:40:33.543802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.547159"], ["updated_at", "2021-03-17 08:40:33.547159"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.549882"], ["updated_at", "2021-03-17 08:40:33.549882"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.552616"], ["updated_at", "2021-03-17 08:40:33.552616"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.555173"], ["updated_at", "2021-03-17 08:40:33.555173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.558426"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
StudentTest: test_: Student should require grade to be set. 
------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should allow an existing student to still be updated if organization is inactive. 
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.619079"], ["updated_at", "2021-03-17 08:40:33.619079"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.622560"], ["updated_at", "2021-03-17 08:40:33.622560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.625757"], ["updated_at", "2021-03-17 08:40:33.625757"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.628990"], ["updated_at", "2021-03-17 08:40:33.628990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.633487"], ["updated_at", "2021-03-17 08:40:33.633487"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.636434"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.3ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:40:33.654076"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "first_name" = ? WHERE "students"."id" = ?[0m  [["first_name", "Ellie!"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
StudentTest: test_: Given context should shows proper name as first and last name. 
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.665088"], ["updated_at", "2021-03-17 08:40:33.665088"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.668164"], ["updated_at", "2021-03-17 08:40:33.668164"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.670714"], ["updated_at", "2021-03-17 08:40:33.670714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.673889"], ["updated_at", "2021-03-17 08:40:33.673889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.676743"], ["updated_at", "2021-03-17 08:40:33.676743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.680595"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should identify a non-existent organization as part of an invalid student. 
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.724839"], ["updated_at", "2021-03-17 08:40:33.724839"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.728278"], ["updated_at", "2021-03-17 08:40:33.728278"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.730859"], ["updated_at", "2021-03-17 08:40:33.730859"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.733499"], ["updated_at", "2021-03-17 08:40:33.733499"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.736032"], ["updated_at", "2021-03-17 08:40:33.736032"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.738638"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Given context should have a make_inactive method. 
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.767419"], ["updated_at", "2021-03-17 08:40:33.767419"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.770720"], ["updated_at", "2021-03-17 08:40:33.770720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.774252"], ["updated_at", "2021-03-17 08:40:33.774252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.777664"], ["updated_at", "2021-03-17 08:40:33.777664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.781793"], ["updated_at", "2021-03-17 08:40:33.781793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.3ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.786424"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "active" = ? WHERE "students"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
StudentTest: test_: Given context should list students for a given organization. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.810569"], ["updated_at", "2021-03-17 08:40:33.810569"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.813679"], ["updated_at", "2021-03-17 08:40:33.813679"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.816225"], ["updated_at", "2021-03-17 08:40:33.816225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.819803"], ["updated_at", "2021-03-17 08:40:33.819803"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.822489"], ["updated_at", "2021-03-17 08:40:33.822489"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.825368"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list junior students. 
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.847153"], ["updated_at", "2021-03-17 08:40:33.847153"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.850814"], ["updated_at", "2021-03-17 08:40:33.850814"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.856333"], ["updated_at", "2021-03-17 08:40:33.856333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.862039"], ["updated_at", "2021-03-17 08:40:33.862039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.866355"], ["updated_at", "2021-03-17 08:40:33.866355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.870933"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE (grade < 7)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE (grade < 7)[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
StudentTest: test_: Student should only allow integers for grade which are greater than 2 and less than 13. 
------------------------------------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list active students. 
---------------------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.928336"], ["updated_at", "2021-03-17 08:40:33.928336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.934114"], ["updated_at", "2021-03-17 08:40:33.934114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.941643"], ["updated_at", "2021-03-17 08:40:33.941643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.944851"], ["updated_at", "2021-03-17 08:40:33.944851"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:33.947611"], ["updated_at", "2021-03-17 08:40:33.947611"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:33.951154"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.9ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "03431". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Organization should require street_1 to be set. 
-------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to "bad". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Given context should list active organizations. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:33.987962"], ["updated_at", "2021-03-17 08:40:33.987962"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:33.991538"], ["updated_at", "2021-03-17 08:40:33.991538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:33.994588"], ["updated_at", "2021-03-17 08:40:33.994588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:33.998604"], ["updated_at", "2021-03-17 08:40:33.998604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.003396"], ["updated_at", "2021-03-17 08:40:34.003396"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.006409"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
OrganizationTest: test_: Organization should require name to be set. 
---------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
OrganizationTest: test_: Organization should have many teams. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Given context should list inactive organizations. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.018559"], ["updated_at", "2021-03-17 08:40:34.018559"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.026356"], ["updated_at", "2021-03-17 08:40:34.026356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.029705"], ["updated_at", "2021-03-17 08:40:34.029705"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.032960"], ["updated_at", "2021-03-17 08:40:34.032960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.036186"], ["updated_at", "2021-03-17 08:40:34.036186"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.064225"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."active" != ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Organization should require short_name to be set. 
---------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow state to be set to nil. 
---------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
OrganizationTest: test_: Organization should require unique value for short_name. 
----------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" ORDER BY "organizations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("short_name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["short_name", "a"], ["created_at", "2021-03-17 08:40:34.080123"], ["updated_at", "2021-03-17 08:40:34.080123"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "A"], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Given context should have a make_active method. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.091578"], ["updated_at", "2021-03-17 08:40:34.091578"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.095050"], ["updated_at", "2021-03-17 08:40:34.095050"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.097822"], ["updated_at", "2021-03-17 08:40:34.097822"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.100315"], ["updated_at", "2021-03-17 08:40:34.100315"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.102730"], ["updated_at", "2021-03-17 08:40:34.102730"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.105761"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "Cinder"], ["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 1], ["updated_at", "2021-03-17 08:40:34.108029"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Given context should list organizations alphabetically. 
---------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.114399"], ["updated_at", "2021-03-17 08:40:34.114399"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.119519"], ["updated_at", "2021-03-17 08:40:34.119519"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.128718"], ["updated_at", "2021-03-17 08:40:34.128718"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.131914"], ["updated_at", "2021-03-17 08:40:34.131914"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.136896"], ["updated_at", "2021-03-17 08:40:34.136896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.140546"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" ORDER BY name[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "343101". 
----------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
OrganizationTest: test_: Organization should ensure inclusion of state in ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "terri". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
OrganizationTest: test_: Organization should have many students. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Given context should have a make_inactive method. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.270579"], ["updated_at", "2021-03-17 08:40:34.270579"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.273875"], ["updated_at", "2021-03-17 08:40:34.273875"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.276480"], ["updated_at", "2021-03-17 08:40:34.276480"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.279707"], ["updated_at", "2021-03-17 08:40:34.279707"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.282613"], ["updated_at", "2021-03-17 08:40:34.282613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.285494"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:40:34.287992"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "3431". 
--------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
OrganizationTest: test_: Organization should require zip to be set. 
--------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "15d32". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to 10. 
------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to "EU". 
--------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "15090". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "15213". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
TeamTest: test_: Team should ensure inclusion of division in ["senior", "junior"]. 
-----------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
TeamTest: test_: Given context should distinguish between junior and senior teams. 
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.332315"], ["updated_at", "2021-03-17 08:40:34.332315"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.337281"], ["updated_at", "2021-03-17 08:40:34.337281"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.340018"], ["updated_at", "2021-03-17 08:40:34.340018"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.342436"], ["updated_at", "2021-03-17 08:40:34.342436"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.345466"], ["updated_at", "2021-03-17 08:40:34.345466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.348998"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (1.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
TeamTest: test_: Given context should list teams for a given organization. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.370815"], ["updated_at", "2021-03-17 08:40:34.370815"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.375090"], ["updated_at", "2021-03-17 08:40:34.375090"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.381908"], ["updated_at", "2021-03-17 08:40:34.381908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.390950"], ["updated_at", "2021-03-17 08:40:34.390950"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.396218"], ["updated_at", "2021-03-17 08:40:34.396218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.400876"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should identify a non-existent organization as part of an invalid team. 
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.414523"], ["updated_at", "2021-03-17 08:40:34.414523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.445944"], ["updated_at", "2021-03-17 08:40:34.445944"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.448692"], ["updated_at", "2021-03-17 08:40:34.448692"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.451895"], ["updated_at", "2021-03-17 08:40:34.451895"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.458408"], ["updated_at", "2021-03-17 08:40:34.458408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.461570"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
TeamTest: test_: Given context should list teams by division. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.476484"], ["updated_at", "2021-03-17 08:40:34.476484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.480522"], ["updated_at", "2021-03-17 08:40:34.480522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.484344"], ["updated_at", "2021-03-17 08:40:34.484344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.491134"], ["updated_at", "2021-03-17 08:40:34.491134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.494965"], ["updated_at", "2021-03-17 08:40:34.494965"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.497849"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" ORDER BY "teams"."division" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Given context should list active teams. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.511592"], ["updated_at", "2021-03-17 08:40:34.511592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.515326"], ["updated_at", "2021-03-17 08:40:34.515326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.525512"], ["updated_at", "2021-03-17 08:40:34.525512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.529208"], ["updated_at", "2021-03-17 08:40:34.529208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.533407"], ["updated_at", "2021-03-17 08:40:34.533407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.536490"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should allow an existing team to still be updated if organization is inactive. 
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.549058"], ["updated_at", "2021-03-17 08:40:34.549058"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.553066"], ["updated_at", "2021-03-17 08:40:34.553066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.558932"], ["updated_at", "2021-03-17 08:40:34.558932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.562509"], ["updated_at", "2021-03-17 08:40:34.562509"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.565927"], ["updated_at", "2021-03-17 08:40:34.565927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.569124"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:40:34.582284"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.2ms)[0m  [1m[33mUPDATE "teams" SET "name" = ? WHERE "teams"."id" = ?[0m  [["name", "ACAC S1"], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
TeamTest: test_: Team should require name to be set. 
-----------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
TeamTest: test_: Given context should have a make_active method. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.598987"], ["updated_at", "2021-03-17 08:40:34.598987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.602903"], ["updated_at", "2021-03-17 08:40:34.602903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.607520"], ["updated_at", "2021-03-17 08:40:34.607520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.612415"], ["updated_at", "2021-03-17 08:40:34.612415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.615505"], ["updated_at", "2021-03-17 08:40:34.615505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.618712"], ["id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
TeamTest: test_: Given context should list inactive teams. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.640564"], ["updated_at", "2021-03-17 08:40:34.640564"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.643597"], ["updated_at", "2021-03-17 08:40:34.643597"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.646365"], ["updated_at", "2021-03-17 08:40:34.646365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.649572"], ["updated_at", "2021-03-17 08:40:34.649572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.652869"], ["updated_at", "2021-03-17 08:40:34.652869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.661297"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."active" != ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
TeamTest: test_: Given context should list seniors teams. 
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.676181"], ["updated_at", "2021-03-17 08:40:34.676181"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.679470"], ["updated_at", "2021-03-17 08:40:34.679470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.682387"], ["updated_at", "2021-03-17 08:40:34.682387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.686587"], ["updated_at", "2021-03-17 08:40:34.686587"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.693847"], ["updated_at", "2021-03-17 08:40:34.693847"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.696568"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "senior"]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "senior"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
TeamTest: test_: Team should require organization_id to be set. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Team should require division to be set. 
---------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Given context should list junior teams. 
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.722950"], ["updated_at", "2021-03-17 08:40:34.722950"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.729550"], ["updated_at", "2021-03-17 08:40:34.729550"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.732931"], ["updated_at", "2021-03-17 08:40:34.732931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.736844"], ["updated_at", "2021-03-17 08:40:34.736844"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.739454"], ["updated_at", "2021-03-17 08:40:34.739454"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.741871"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "junior"]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "junior"]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
TeamTest: test_: Team should have many students through student_teams. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should identify a non-active organization as part of an invalid team. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.764156"], ["updated_at", "2021-03-17 08:40:34.764156"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.770033"], ["updated_at", "2021-03-17 08:40:34.770033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.773497"], ["updated_at", "2021-03-17 08:40:34.773497"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.801371"], ["updated_at", "2021-03-17 08:40:34.801371"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.804565"], ["updated_at", "2021-03-17 08:40:34.804565"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.807476"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ghost"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ghost"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "ghost"], ["active", 0], ["created_at", "2021-03-17 08:40:34.816864"], ["updated_at", "2021-03-17 08:40:34.816864"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (2.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
TeamTest: test_: Team should have many student_teams. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
TeamTest: test_: Given context should have a make_inactive method. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.828627"], ["updated_at", "2021-03-17 08:40:34.828627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.832347"], ["updated_at", "2021-03-17 08:40:34.832347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.835460"], ["updated_at", "2021-03-17 08:40:34.835460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.838368"], ["updated_at", "2021-03-17 08:40:34.838368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.841612"], ["updated_at", "2021-03-17 08:40:34.841612"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.846435"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.4ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
TeamTest: test_: Team should belong to organization. 
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
TeamTest: test_: Given context should list teams alphabetically. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:34.867506"], ["updated_at", "2021-03-17 08:40:34.867506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:34.871019"], ["updated_at", "2021-03-17 08:40:34.871019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:34.875418"], ["updated_at", "2021-03-17 08:40:34.875418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:34.880420"], ["updated_at", "2021-03-17 08:40:34.880420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:34.883930"], ["updated_at", "2021-03-17 08:40:34.883930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:34.886811"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" ORDER BY "teams"."name" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Given context should have a make_inactive method. 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:40:59.456193"], ["updated_at", "2021-03-17 08:40:59.456193"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:40:59.460337"], ["updated_at", "2021-03-17 08:40:59.460337"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:40:59.463409"], ["updated_at", "2021-03-17 08:40:59.463409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:40:59.473958"], ["updated_at", "2021-03-17 08:40:59.473958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:40:59.478878"], ["updated_at", "2021-03-17 08:40:59.478878"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:40:59.483814"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "active" = ? WHERE "students"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to "bad". 
-----------------------------------------------------------------------
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
StudentTest: test_: Student should have many student_teams. 
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to 10.5. 
----------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should identify a non-active organization as part of an invalid student. 
-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.522869"], ["updated_at", "2021-03-17 08:41:00.522869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.527251"], ["updated_at", "2021-03-17 08:41:00.527251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.532488"], ["updated_at", "2021-03-17 08:41:00.532488"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.540850"], ["updated_at", "2021-03-17 08:41:00.540850"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.543909"], ["updated_at", "2021-03-17 08:41:00.543909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.547568"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ghost"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ghost"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "ghost"], ["active", 0], ["created_at", "2021-03-17 08:41:00.566492"], ["updated_at", "2021-03-17 08:41:00.566492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTest: test_: Student should require organization_id to be set. 
----------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list active students. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.579804"], ["updated_at", "2021-03-17 08:41:00.579804"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.585067"], ["updated_at", "2021-03-17 08:41:00.585067"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.587897"], ["updated_at", "2021-03-17 08:41:00.587897"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.590603"], ["updated_at", "2021-03-17 08:41:00.590603"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.593298"], ["updated_at", "2021-03-17 08:41:00.593298"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.595925"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.6ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to nil. 
---------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
StudentTest: test_: Student should only allow integers for grade which are greater than 2 and less than 13. 
------------------------------------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
StudentTest: test_: Student should require first_name to be set. 
-----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
StudentTest: test_: Student should not allow grade to be set to -4. 
--------------------------------------------------------------------
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should identify a non-existent organization as part of an invalid student. 
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.685520"], ["updated_at", "2021-03-17 08:41:00.685520"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.689037"], ["updated_at", "2021-03-17 08:41:00.689037"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.691590"], ["updated_at", "2021-03-17 08:41:00.691590"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.693998"], ["updated_at", "2021-03-17 08:41:00.693998"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.696478"], ["updated_at", "2021-03-17 08:41:00.696478"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.3ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.700502"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
StudentTest: test_: Student should belong to organization. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
StudentTest: test_: Given context should list students for a given organization. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.729917"], ["updated_at", "2021-03-17 08:41:00.729917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.738771"], ["updated_at", "2021-03-17 08:41:00.738771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.742435"], ["updated_at", "2021-03-17 08:41:00.742435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.747200"], ["updated_at", "2021-03-17 08:41:00.747200"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.749919"], ["updated_at", "2021-03-17 08:41:00.749919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.753096"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTest: test_: Given context should list students alphabetically. 
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.775710"], ["updated_at", "2021-03-17 08:41:00.775710"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.779268"], ["updated_at", "2021-03-17 08:41:00.779268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.782229"], ["updated_at", "2021-03-17 08:41:00.782229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.787172"], ["updated_at", "2021-03-17 08:41:00.787172"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.789990"], ["updated_at", "2021-03-17 08:41:00.789990"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.792426"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" ORDER BY last_name, first_name[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list junior students. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.825931"], ["updated_at", "2021-03-17 08:41:00.825931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.830734"], ["updated_at", "2021-03-17 08:41:00.830734"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.834531"], ["updated_at", "2021-03-17 08:41:00.834531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.838877"], ["updated_at", "2021-03-17 08:41:00.838877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.844531"], ["updated_at", "2021-03-17 08:41:00.844531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.847908"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.0ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE (grade < 7)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE (grade < 7)[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------
StudentTest: test_: Given context should distinguish between junior and senior students. 
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.866015"], ["updated_at", "2021-03-17 08:41:00.866015"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.872692"], ["updated_at", "2021-03-17 08:41:00.872692"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.876138"], ["updated_at", "2021-03-17 08:41:00.876138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.879333"], ["updated_at", "2021-03-17 08:41:00.879333"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.882306"], ["updated_at", "2021-03-17 08:41:00.882306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.885908"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTest: test_: Student should allow grade to be set to 12. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
StudentTest: test_: Given context should list inactive students. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.914681"], ["updated_at", "2021-03-17 08:41:00.914681"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.918723"], ["updated_at", "2021-03-17 08:41:00.918723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.922139"], ["updated_at", "2021-03-17 08:41:00.922139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.926709"], ["updated_at", "2021-03-17 08:41:00.926709"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.929493"], ["updated_at", "2021-03-17 08:41:00.929493"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.932254"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.6ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE "students"."active" != ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return student's current team, given multiple teams. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:00.971577"], ["updated_at", "2021-03-17 08:41:00.971577"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:00.975097"], ["updated_at", "2021-03-17 08:41:00.975097"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:00.978002"], ["updated_at", "2021-03-17 08:41:00.978002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:00.980905"], ["updated_at", "2021-03-17 08:41:00.980905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:00.983941"], ["updated_at", "2021-03-17 08:41:00.983941"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:00.986739"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.3ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-16"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 3], ["start_date", "2021-03-16"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTest: test_: Student should require last_name to be set. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
StudentTest: test_: Student should require grade to be set. 
------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
StudentTest: test_: Given context should have a make_active method. 
--------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.084665"], ["updated_at", "2021-03-17 08:41:01.084665"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.088100"], ["updated_at", "2021-03-17 08:41:01.088100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.091292"], ["updated_at", "2021-03-17 08:41:01.091292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.095731"], ["updated_at", "2021-03-17 08:41:01.095731"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.098446"], ["updated_at", "2021-03-17 08:41:01.098446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.119005"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "active" = ? WHERE "students"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTest: test_: Given context should shows name as last, first name. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.151018"], ["updated_at", "2021-03-17 08:41:01.151018"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.154554"], ["updated_at", "2021-03-17 08:41:01.154554"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.157426"], ["updated_at", "2021-03-17 08:41:01.157426"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.160435"], ["updated_at", "2021-03-17 08:41:01.160435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.164195"], ["updated_at", "2021-03-17 08:41:01.164195"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.169194"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTest: test_: Student should have many teams through student_teams. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return student's current team, given it exists. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.193262"], ["updated_at", "2021-03-17 08:41:01.193262"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.196922"], ["updated_at", "2021-03-17 08:41:01.196922"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.199703"], ["updated_at", "2021-03-17 08:41:01.199703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.205053"], ["updated_at", "2021-03-17 08:41:01.205053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.209633"], ["updated_at", "2021-03-17 08:41:01.209633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.212849"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should allow an existing student to still be updated if organization is inactive. 
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.282743"], ["updated_at", "2021-03-17 08:41:01.282743"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.287296"], ["updated_at", "2021-03-17 08:41:01.287296"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.290398"], ["updated_at", "2021-03-17 08:41:01.290398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.293539"], ["updated_at", "2021-03-17 08:41:01.293539"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.296599"], ["updated_at", "2021-03-17 08:41:01.296599"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.299429"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:41:01.319924"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Update (0.1ms)[0m  [1m[33mUPDATE "students" SET "first_name" = ? WHERE "students"."id" = ?[0m  [["first_name", "Ellie!"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
StudentTest: test_: Given context should shows return nil for student's current team, if doesn't exist. 
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.327609"], ["updated_at", "2021-03-17 08:41:01.327609"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.330768"], ["updated_at", "2021-03-17 08:41:01.330768"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.333714"], ["updated_at", "2021-03-17 08:41:01.333714"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.341098"], ["updated_at", "2021-03-17 08:41:01.341098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.345740"], ["updated_at", "2021-03-17 08:41:01.345740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.349974"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-16"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
StudentTest: test_: Given context should shows proper name as first and last name. 
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.422052"], ["updated_at", "2021-03-17 08:41:01.422052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.426999"], ["updated_at", "2021-03-17 08:41:01.426999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.431090"], ["updated_at", "2021-03-17 08:41:01.431090"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.436112"], ["updated_at", "2021-03-17 08:41:01.436112"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.441261"], ["updated_at", "2021-03-17 08:41:01.441261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.446390"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.6ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------
StudentTest: test_: Given context should list senior students. 
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.477353"], ["updated_at", "2021-03-17 08:41:01.477353"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.482055"], ["updated_at", "2021-03-17 08:41:01.482055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.485817"], ["updated_at", "2021-03-17 08:41:01.485817"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.488532"], ["updated_at", "2021-03-17 08:41:01.488532"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.490918"], ["updated_at", "2021-03-17 08:41:01.490918"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.493266"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "students" WHERE (grade > 6)[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE (grade > 6)[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require start_date to be set. 
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams for a given team. 
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.532878"], ["updated_at", "2021-03-17 08:41:01.532878"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.547364"], ["updated_at", "2021-03-17 08:41:01.547364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.555786"], ["updated_at", "2021-03-17 08:41:01.555786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.559273"], ["updated_at", "2021-03-17 08:41:01.559273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.562827"], ["updated_at", "2021-03-17 08:41:01.562827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.566428"], ["id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.4ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (team_id =1)[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should only allow integers for position which are greater than 0 and less than 6. 
----------------------------------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams alphabetically. 
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.673010"], ["updated_at", "2021-03-17 08:41:01.673010"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.677701"], ["updated_at", "2021-03-17 08:41:01.677701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.680757"], ["updated_at", "2021-03-17 08:41:01.680757"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.683676"], ["updated_at", "2021-03-17 08:41:01.683676"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.686791"], ["updated_at", "2021-03-17 08:41:01.686791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.690843"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.7ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" INNER JOIN "students" ON "students"."id" = "student_teams"."student_id" ORDER BY last_name, first_name[0m
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list all past student_team assignments. 
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.760494"], ["updated_at", "2021-03-17 08:41:01.760494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.764352"], ["updated_at", "2021-03-17 08:41:01.764352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.767586"], ["updated_at", "2021-03-17 08:41:01.767586"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.770620"], ["updated_at", "2021-03-17 08:41:01.770620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.774491"], ["updated_at", "2021-03-17 08:41:01.774491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.778980"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.3ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.7ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-17"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to "bad". 
------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list active student_teams. 
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.833989"], ["updated_at", "2021-03-17 08:41:01.833989"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.837138"], ["updated_at", "2021-03-17 08:41:01.837138"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.839856"], ["updated_at", "2021-03-17 08:41:01.839856"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.842731"], ["updated_at", "2021-03-17 08:41:01.842731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.847110"], ["updated_at", "2021-03-17 08:41:01.847110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.851321"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.6ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_teams" WHERE "student_teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Wed, 17 Mar 2021. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow position to be set to 2. 
--------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
StudentTeamTest: test_: Given context should list all captains. 
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:01.923719"], ["updated_at", "2021-03-17 08:41:01.923719"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:01.927374"], ["updated_at", "2021-03-17 08:41:01.927374"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:01.930236"], ["updated_at", "2021-03-17 08:41:01.930236"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:01.933039"], ["updated_at", "2021-03-17 08:41:01.933039"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:01.935940"], ["updated_at", "2021-03-17 08:41:01.935940"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:01.939337"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.5ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."position" = ?[0m  [["position", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-active student as part of an invalid assignment. 
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.006514"], ["updated_at", "2021-03-17 08:41:02.006514"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.009818"], ["updated_at", "2021-03-17 08:41:02.009818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.012791"], ["updated_at", "2021-03-17 08:41:02.012791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.015893"], ["updated_at", "2021-03-17 08:41:02.015893"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.018747"], ["updated_at", "2021-03-17 08:41:02.018747"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.022110"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "ghost"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should belong to student. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to Wed, 24 Mar 2021. 
-----------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should terminate a team assignment as of today. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.086686"], ["updated_at", "2021-03-17 08:41:02.086686"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.090122"], ["updated_at", "2021-03-17 08:41:02.090122"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.092470"], ["updated_at", "2021-03-17 08:41:02.092470"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.095235"], ["updated_at", "2021-03-17 08:41:02.095235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.098436"], ["updated_at", "2021-03-17 08:41:02.098436"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.101490"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-03-17"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should allow for an end date in the past (or today) but after the start date. 
--------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.166663"], ["updated_at", "2021-03-17 08:41:02.166663"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.169867"], ["updated_at", "2021-03-17 08:41:02.169867"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.172332"], ["updated_at", "2021-03-17 08:41:02.172332"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.174958"], ["updated_at", "2021-03-17 08:41:02.174958"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.177400"], ["updated_at", "2021-03-17 08:41:02.177400"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.180412"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to -4. 
-------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list inactive student_teams. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.252108"], ["updated_at", "2021-03-17 08:41:02.252108"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.255278"], ["updated_at", "2021-03-17 08:41:02.255278"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.257935"], ["updated_at", "2021-03-17 08:41:02.257935"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.260306"], ["updated_at", "2021-03-17 08:41:02.260306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.263884"], ["updated_at", "2021-03-17 08:41:02.263884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.267277"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.5ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.2ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "student_teams" WHERE "student_teams"."active" != ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
StudentTeamTest: test_: StudentTeam should belong to team. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to "bad". 
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to 2.5. 
--------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow start_date to be set to nil. 
----------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams chronologically. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.332665"], ["updated_at", "2021-03-17 08:41:02.332665"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.336453"], ["updated_at", "2021-03-17 08:41:02.336453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.341287"], ["updated_at", "2021-03-17 08:41:02.341287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.345269"], ["updated_at", "2021-03-17 08:41:02.345269"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.347966"], ["updated_at", "2021-03-17 08:41:02.347966"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.350507"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.3ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" ORDER BY "student_teams"."start_date" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Sun, 17 Mar 2019. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams positionally. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.426581"], ["updated_at", "2021-03-17 08:41:02.426581"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.429827"], ["updated_at", "2021-03-17 08:41:02.429827"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.433694"], ["updated_at", "2021-03-17 08:41:02.433694"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.436580"], ["updated_at", "2021-03-17 08:41:02.436580"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.439978"], ["updated_at", "2021-03-17 08:41:02.439978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.2ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.444699"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.3ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" ORDER BY "student_teams"."position" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
StudentTeamTest: test_: Given context should have a make_active method. 
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.505623"], ["updated_at", "2021-03-17 08:41:02.505623"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.508913"], ["updated_at", "2021-03-17 08:41:02.508913"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.511301"], ["updated_at", "2021-03-17 08:41:02.511301"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.513943"], ["updated_at", "2021-03-17 08:41:02.513943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.517980"], ["updated_at", "2021-03-17 08:41:02.517980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.522557"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.6ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "active" = ? WHERE "student_teams"."id" = ?[0m  [["active", 1], ["id", 5]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should not allow for an end date in the future or before the start date. 
---------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.597331"], ["updated_at", "2021-03-17 08:41:02.597331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.601873"], ["updated_at", "2021-03-17 08:41:02.601873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.606228"], ["updated_at", "2021-03-17 08:41:02.606228"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.611813"], ["updated_at", "2021-03-17 08:41:02.611813"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.616242"], ["updated_at", "2021-03-17 08:41:02.616242"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.619510"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
StudentTeamTest: test_: Given context should have a make_inactive method. 
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.714972"], ["updated_at", "2021-03-17 08:41:02.714972"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.718243"], ["updated_at", "2021-03-17 08:41:02.718243"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.720805"], ["updated_at", "2021-03-17 08:41:02.720805"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.723785"], ["updated_at", "2021-03-17 08:41:02.723785"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.726493"], ["updated_at", "2021-03-17 08:41:02.726493"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.728967"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "active" = ? WHERE "student_teams"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-existent student as part of an invalid assignment. 
---------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.788492"], ["updated_at", "2021-03-17 08:41:02.788492"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.791713"], ["updated_at", "2021-03-17 08:41:02.791713"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.804471"], ["updated_at", "2021-03-17 08:41:02.804471"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.809103"], ["updated_at", "2021-03-17 08:41:02.809103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.812813"], ["updated_at", "2021-03-17 08:41:02.812813"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.815499"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should allow start_date to be set to Wed, 27 Jan 2021. 
-------------------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should not allow position to be set to nil. 
--------------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should not terminate a team assignment that is already closed. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.878724"], ["updated_at", "2021-03-17 08:41:02.878724"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.882440"], ["updated_at", "2021-03-17 08:41:02.882440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.885556"], ["updated_at", "2021-03-17 08:41:02.885556"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.889870"], ["updated_at", "2021-03-17 08:41:02.889870"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.892881"], ["updated_at", "2021-03-17 08:41:02.892881"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.895312"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.3ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-01-20"], ["id", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-existent team as part of an invalid assignment. 
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:02.965375"], ["updated_at", "2021-03-17 08:41:02.965375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:02.969318"], ["updated_at", "2021-03-17 08:41:02.969318"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:02.972176"], ["updated_at", "2021-03-17 08:41:02.972176"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:02.975845"], ["updated_at", "2021-03-17 08:41:02.975845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:02.980172"], ["updated_at", "2021-03-17 08:41:02.980172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:02.983174"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.2ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should end the current team assignment if it exists before adding a new team assignment for a student. 
---------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.034002"], ["updated_at", "2021-03-17 08:41:03.034002"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.037355"], ["updated_at", "2021-03-17 08:41:03.037355"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.040771"], ["updated_at", "2021-03-17 08:41:03.040771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.044876"], ["updated_at", "2021-03-17 08:41:03.044876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.048637"], ["updated_at", "2021-03-17 08:41:03.048637"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.051579"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.4ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Update (0.1ms)[0m  [1m[33mUPDATE "student_teams" SET "end_date" = ? WHERE "student_teams"."id" = ?[0m  [["end_date", "2021-02-24"], ["id", 2]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 3], ["start_date", "2021-02-24"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.0ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require student_id to be set. 
-------------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list student_teams for a given student. 
-------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.132939"], ["updated_at", "2021-03-17 08:41:03.132939"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.137681"], ["updated_at", "2021-03-17 08:41:03.137681"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.141559"], ["updated_at", "2021-03-17 08:41:03.141559"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.144365"], ["updated_at", "2021-03-17 08:41:03.144365"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.147149"], ["updated_at", "2021-03-17 08:41:03.147149"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.150287"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ?[0m  [["student_id", 2]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should list all current student_team assignments. 
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.210318"], ["updated_at", "2021-03-17 08:41:03.210318"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.213460"], ["updated_at", "2021-03-17 08:41:03.213460"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.215958"], ["updated_at", "2021-03-17 08:41:03.215958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.220225"], ["updated_at", "2021-03-17 08:41:03.220225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.225084"], ["updated_at", "2021-03-17 08:41:03.225084"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.227909"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.2ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT "student_teams".* FROM "student_teams" WHERE (end_date IS NULL)[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT  "students".* FROM "students" WHERE "students"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require team_id to be set. 
----------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
StudentTeamTest: test_: StudentTeam should require position to be set. 
-----------------------------------------------------------------------
  [1m[36mStudent Load (0.1ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
StudentTeamTest: test_: Given context should identify a non-active team as part of an invalid assignment. 
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.294785"], ["updated_at", "2021-03-17 08:41:03.294785"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.298438"], ["updated_at", "2021-03-17 08:41:03.298438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.305759"], ["updated_at", "2021-03-17 08:41:03.305759"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.309125"], ["updated_at", "2021-03-17 08:41:03.309125"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.312459"], ["updated_at", "2021-03-17 08:41:03.312459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.316507"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.5ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Ellie"], ["last_name", "Wilshire"], ["grade", 9], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Anna"], ["last_name", "Davis"], ["grade", 7], ["organization_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id", "active") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "Rachel"], ["last_name", "Heimann"], ["grade", 8], ["organization_id", 4], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "MJ"], ["last_name", "Nelson"], ["grade", 5], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Mason"], ["last_name", "Moon"], ["grade", 4], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mStudent Create (0.1ms)[0m  [1m[32mINSERT INTO "students" ("first_name", "last_name", "grade", "organization_id") VALUES (?, ?, ?, ?)[0m  [["first_name", "Amelia"], ["last_name", "Smith"], ["grade", 3], ["organization_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 1], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 1], ["team_id", 1], ["start_date", "2020-10-28"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 2], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 2], ["team_id", 1], ["start_date", "2020-11-04"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 5], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 5], ["team_id", 2], ["start_date", "2020-11-25"], ["position", 2]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 4], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position") VALUES (?, ?, ?, ?)[0m  [["student_id", 4], ["team_id", 2], ["start_date", "2020-11-18"], ["position", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mStudentTeam Load (0.1ms)[0m  [1m[34mSELECT  "student_teams".* FROM "student_teams" WHERE "student_teams"."student_id" = ? AND (end_date IS NULL) ORDER BY "student_teams"."id" ASC LIMIT ?[0m  [["student_id", 6], ["LIMIT", 1]]
  [1m[36mStudentTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "student_teams" ("student_id", "team_id", "start_date", "position", "active") VALUES (?, ?, ?, ?, ?)[0m  [["student_id", 6], ["team_id", 2], ["start_date", "2020-12-02"], ["position", 3], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ghost"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStudent Load (0.0ms)[0m  [1m[34mSELECT "students".* FROM "students" WHERE "students"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to "bad". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
OrganizationTest: test_: Organization should require unique value for short_name. 
----------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" ORDER BY "organizations"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("short_name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["short_name", "a"], ["created_at", "2021-03-17 08:41:03.386387"], ["updated_at", "2021-03-17 08:41:03.386387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "A"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "15d32". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Given context should list inactive organizations. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.398142"], ["updated_at", "2021-03-17 08:41:03.398142"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.404691"], ["updated_at", "2021-03-17 08:41:03.404691"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.408307"], ["updated_at", "2021-03-17 08:41:03.408307"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.411401"], ["updated_at", "2021-03-17 08:41:03.411401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.415409"], ["updated_at", "2021-03-17 08:41:03.415409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.419261"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."active" != ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" != ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow state to be set to nil. 
---------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "03431". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Given context should have a make_inactive method. 
---------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.430145"], ["updated_at", "2021-03-17 08:41:03.430145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.435881"], ["updated_at", "2021-03-17 08:41:03.435881"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.440639"], ["updated_at", "2021-03-17 08:41:03.440639"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.443464"], ["updated_at", "2021-03-17 08:41:03.443464"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.448418"], ["updated_at", "2021-03-17 08:41:03.448418"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.451476"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:41:03.453682"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
OrganizationTest: test_: Organization should require name to be set. 
---------------------------------------------------------------------
  [1m[36mOrganization Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Organization should require street_1 to be set. 
-------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to "EU". 
--------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Given context should have a make_active method. 
-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.485870"], ["updated_at", "2021-03-17 08:41:03.485870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.489464"], ["updated_at", "2021-03-17 08:41:03.489464"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.491837"], ["updated_at", "2021-03-17 08:41:03.491837"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.494361"], ["updated_at", "2021-03-17 08:41:03.494361"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.496830"], ["updated_at", "2021-03-17 08:41:03.496830"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.3ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.500081"], ["id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "Cinder"], ["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 1], ["updated_at", "2021-03-17 08:41:03.506800"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
OrganizationTest: test_: Given context should list active organizations. 
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.512915"], ["updated_at", "2021-03-17 08:41:03.512915"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.517823"], ["updated_at", "2021-03-17 08:41:03.517823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.521592"], ["updated_at", "2021-03-17 08:41:03.521592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.525007"], ["updated_at", "2021-03-17 08:41:03.525007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.528025"], ["updated_at", "2021-03-17 08:41:03.528025"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.530662"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (2.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
OrganizationTest: test_: Organization should have many students. 
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "3431". 
--------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "terri". 
---------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow state to be set to 10. 
------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
OrganizationTest: test_: Organization should have many teams. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
OrganizationTest: test_: Organization should ensure inclusion of state in ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"]. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------------
OrganizationTest: test_: Given context should list organizations alphabetically. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.698553"], ["updated_at", "2021-03-17 08:41:03.698553"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.706749"], ["updated_at", "2021-03-17 08:41:03.706749"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.709671"], ["updated_at", "2021-03-17 08:41:03.709671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.714416"], ["updated_at", "2021-03-17 08:41:03.714416"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.717649"], ["updated_at", "2021-03-17 08:41:03.717649"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.720144"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" ORDER BY name[0m
  [1m[35m (2.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
OrganizationTest: test_: Organization should require zip to be set. 
--------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "15090". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------------------------
OrganizationTest: test_: Organization should not allow zip to be set to "343101". 
----------------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------
OrganizationTest: test_: Organization should allow zip to be set to "15213". 
-----------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
OrganizationTest: test_: Organization should require short_name to be set. 
---------------------------------------------------------------------------
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE "organizations"."short_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
TeamTest: test_: Team should require organization_id to be set. 
----------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should identify a non-active organization as part of an invalid team. 
-----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.753502"], ["updated_at", "2021-03-17 08:41:03.753502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.757374"], ["updated_at", "2021-03-17 08:41:03.757374"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.759772"], ["updated_at", "2021-03-17 08:41:03.759772"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.762288"], ["updated_at", "2021-03-17 08:41:03.762288"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.766320"], ["updated_at", "2021-03-17 08:41:03.766320"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.773657"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ghost"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ghost"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "ghost"], ["active", 0], ["created_at", "2021-03-17 08:41:03.794031"], ["updated_at", "2021-03-17 08:41:03.794031"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Given context should list active teams. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.800306"], ["updated_at", "2021-03-17 08:41:03.800306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.807361"], ["updated_at", "2021-03-17 08:41:03.807361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.810479"], ["updated_at", "2021-03-17 08:41:03.810479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.815960"], ["updated_at", "2021-03-17 08:41:03.815960"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.818639"], ["updated_at", "2021-03-17 08:41:03.818639"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.821197"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Given context should list junior teams. 
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.834034"], ["updated_at", "2021-03-17 08:41:03.834034"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.841130"], ["updated_at", "2021-03-17 08:41:03.841130"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.844198"], ["updated_at", "2021-03-17 08:41:03.844198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.849136"], ["updated_at", "2021-03-17 08:41:03.849136"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.851790"], ["updated_at", "2021-03-17 08:41:03.851790"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.854269"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "junior"]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "junior"]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
TeamTest: test_: Team should belong to organization. 
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
TeamTest: test_: Team should require division to be set. 
---------------------------------------------------------
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
TeamTest: test_: Given context should list seniors teams. 
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.876712"], ["updated_at", "2021-03-17 08:41:03.876712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.882730"], ["updated_at", "2021-03-17 08:41:03.882730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.885476"], ["updated_at", "2021-03-17 08:41:03.885476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.888104"], ["updated_at", "2021-03-17 08:41:03.888104"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.890669"], ["updated_at", "2021-03-17 08:41:03.890669"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.893257"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "senior"]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."division" = ?[0m  [["division", "senior"]]
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should allow an existing team to still be updated if organization is inactive. 
--------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.911716"], ["updated_at", "2021-03-17 08:41:03.911716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.917686"], ["updated_at", "2021-03-17 08:41:03.917686"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.920621"], ["updated_at", "2021-03-17 08:41:03.920621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.933150"], ["updated_at", "2021-03-17 08:41:03.933150"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.940427"], ["updated_at", "2021-03-17 08:41:03.940427"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.943631"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.3ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "active" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["active", 0], ["updated_at", "2021-03-17 08:41:03.956745"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT  "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "name" = ? WHERE "teams"."id" = ?[0m  [["name", "ACAC S1"], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
TeamTest: test_: Team should ensure inclusion of division in ["senior", "junior"]. 
-----------------------------------------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------
TeamTest: test_: Given context should list inactive teams. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:03.974682"], ["updated_at", "2021-03-17 08:41:03.974682"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:03.979287"], ["updated_at", "2021-03-17 08:41:03.979287"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:03.983083"], ["updated_at", "2021-03-17 08:41:03.983083"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:03.985617"], ["updated_at", "2021-03-17 08:41:03.985617"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:03.988544"], ["updated_at", "2021-03-17 08:41:03.988544"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:03.991010"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."active" != ?[0m  [["active", 1]]
  [1m[36mTeam Load (0.3ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."active" != ?[0m  [["active", 1]]
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
TeamTest: test_: Given context should list teams alphabetically. 
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.008221"], ["updated_at", "2021-03-17 08:41:04.008221"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.012113"], ["updated_at", "2021-03-17 08:41:04.012113"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.016778"], ["updated_at", "2021-03-17 08:41:04.016778"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.019441"], ["updated_at", "2021-03-17 08:41:04.019441"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.021963"], ["updated_at", "2021-03-17 08:41:04.021963"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.025115"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.3ms)[0m  [1m[34mSELECT "teams".* FROM "teams" ORDER BY "teams"."name" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
TeamTest: test_: Team should require name to be set. 
-----------------------------------------------------
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
TeamTest: test_: Team should have many students through student_teams. 
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
TeamTest: test_: Team should have many student_teams. 
------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
TeamTest: test_: Given context should have a make_active method. 
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.053250"], ["updated_at", "2021-03-17 08:41:04.053250"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.056899"], ["updated_at", "2021-03-17 08:41:04.056899"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.059646"], ["updated_at", "2021-03-17 08:41:04.059646"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.062235"], ["updated_at", "2021-03-17 08:41:04.062235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.081964"], ["updated_at", "2021-03-17 08:41:04.081964"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.085740"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.2ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 1], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------
TeamTest: test_: Given context should have a make_inactive method. 
-------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.107380"], ["updated_at", "2021-03-17 08:41:04.107380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.111884"], ["updated_at", "2021-03-17 08:41:04.111884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.117779"], ["updated_at", "2021-03-17 08:41:04.117779"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.120793"], ["updated_at", "2021-03-17 08:41:04.120793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.124515"], ["updated_at", "2021-03-17 08:41:04.124515"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.127874"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.4ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTeam Update (0.1ms)[0m  [1m[33mUPDATE "teams" SET "active" = ? WHERE "teams"."id" = ?[0m  [["active", 0], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.0ms)[0m  [1m[34mSELECT  "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------------
TeamTest: test_: Given context should list teams for a given organization. 
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.150280"], ["updated_at", "2021-03-17 08:41:04.150280"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.153486"], ["updated_at", "2021-03-17 08:41:04.153486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.156708"], ["updated_at", "2021-03-17 08:41:04.156708"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.159376"], ["updated_at", "2021-03-17 08:41:04.159376"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.161884"], ["updated_at", "2021-03-17 08:41:04.161884"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.165247"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "teams" WHERE "teams"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."organization_id" = ?[0m  [["organization_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
TeamTest: test_: Given context should list teams by division. 
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.185577"], ["updated_at", "2021-03-17 08:41:04.185577"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.188903"], ["updated_at", "2021-03-17 08:41:04.188903"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.191479"], ["updated_at", "2021-03-17 08:41:04.191479"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.194328"], ["updated_at", "2021-03-17 08:41:04.194328"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.197123"], ["updated_at", "2021-03-17 08:41:04.197123"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.5ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.200354"], ["id", 4]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTeam Load (0.1ms)[0m  [1m[34mSELECT "teams".* FROM "teams" ORDER BY "teams"."division" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
TeamTest: test_: Given context should identify a non-existent organization as part of an invalid team. 
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.219862"], ["updated_at", "2021-03-17 08:41:04.219862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.232591"], ["updated_at", "2021-03-17 08:41:04.232591"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.240093"], ["updated_at", "2021-03-17 08:41:04.240093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.243227"], ["updated_at", "2021-03-17 08:41:04.243227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.247945"], ["updated_at", "2021-03-17 08:41:04.247945"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.251014"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------
TeamTest: test_: Given context should distinguish between junior and senior teams. 
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Millvale"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Millvale Alliance"], ["street_1", "10 Sherman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15209"], ["short_name", "Millvale"], ["created_at", "2021-03-17 08:41:04.264155"], ["updated_at", "2021-03-17 08:41:04.264155"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Uniontown"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Uniontown Alliance"], ["street_1", "123 Matthew Dr"], ["city", "Uniontown"], ["state", "PA"], ["zip", "15401"], ["short_name", "Uniontown"], ["created_at", "2021-03-17 08:41:04.270609"], ["updated_at", "2021-03-17 08:41:04.270609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "Cinder"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Cinderlands Alliance"], ["street_1", "2601 Smallman St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15222"], ["short_name", "Cinder"], ["active", 0], ["created_at", "2021-03-17 08:41:04.275633"], ["updated_at", "2021-03-17 08:41:04.275633"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "ACAC"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Allegheny Center Alliance"], ["street_1", "250 East Ohio St"], ["city", "Pittsburgh"], ["state", "PA"], ["zip", "15212"], ["short_name", "ACAC"], ["created_at", "2021-03-17 08:41:04.278738"], ["updated_at", "2021-03-17 08:41:04.278738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) LIMIT ?[0m  [["short_name", "SQ"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "street_1", "city", "state", "zip", "short_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "ScienceQuiz"], ["street_1", "10152 Sudberry Dr"], ["city", "Wexford"], ["state", "PA"], ["zip", "15090"], ["short_name", "SQ"], ["created_at", "2021-03-17 08:41:04.283066"], ["updated_at", "2021-03-17 08:41:04.283066"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "organizations" WHERE LOWER("organizations"."short_name") = LOWER(?) AND "organizations"."id" != ? LIMIT ?[0m  [["short_name", "ACAC"], ["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Update (0.1ms)[0m  [1m[33mUPDATE "organizations" SET "created_at" = ?, "updated_at" = ? WHERE "organizations"."id" = ?[0m  [["created_at", "2020-03-17 04:00:00"], ["updated_at", "2021-03-17 08:41:04.285559"], ["id", 4]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "ACAC 1"], ["organization_id", 4], ["division", "senior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division") VALUES (?, ?, ?)[0m  [["name", "Millvale 1"], ["organization_id", 1], ["division", "junior"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."active" = ?[0m  [["active", 1]]
  [1m[36mTeam Create (0.1ms)[0m  [1m[32mINSERT INTO "teams" ("name", "organization_id", "division", "active") VALUES (?, ?, ?, ?)[0m  [["name", "ACAC 4"], ["organization_id", 4], ["division", "senior"], ["active", 0]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
